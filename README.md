# Parallel

Python Global Interpreter Lock (GIL) — это своеобразная блокировка, позволяющая только одному потоку управлять интерпретатором Python.

Многопроцессорность: Применимо к вычислительно сложным задачам, позволяет всем менять ограничения GIL, используя несколько CPU.
Python
Скопировать код
from multiprocessing import Process

def compute_heavy(): pass  # Тяжёлые вычисления, вроде поиска иглы в стоге сена
Process(target=compute_heavy).start()

Многопоточность: Она оптимальна для задач, связанных с ожиданием I/O и возможностью параллельного выполнения, обусловленной освобождением GIL во время операций I/O.
Python
from threading import Thread

def disk_io_bound(): pass  # Ожидание I/O, похожее на ожидание дождя в пустыне
Thread(target=disk_io_bound).start()

Asyncio: Лучший инструмент для асинхронных I/O-операций с эффективным переключением между задачами и снижением возможных проблем, связанных с многопоточностью.
Python
import asyncio

async def async_io_operation(): pass  # I/O настолько замедленное, что вам хватит времени даже прочесть "Войну и мир" целиком!
asyncio.run(async_io_operation())

Вкратце: используйте многопроцессорность для CPU-затратных задач, многопоточность для задач, требующих ожидания I/O в синхронном режиме и asyncio для асинхронного I/O.

Потоки: Быстрый ввод-вывод, ограниченное число соединений
Многопоточность отлично подходит для задач, требующих интенсивной работы с I/O, при ограниченном числе соединений и минимальном использовании CPU.
Asyncio и uvloop: Медленный ввод-вывод, большое число соединений
Для медленных I/O задач и большого числа соединений, таких как долгие опросы или веб-сокеты, asyncio с неблокирующим подходом ускоряет обработку.
Uvloop значительно повышает скорость работы asyncio, так, HTTP-сервер Japronto использует uvloop для более быстрой обработки запросов.
Многопроцессорность: Вычислительно сложные задачи
Для задач, требующих интенсивных вычислений, многопроцессорность распределяет нагрузку между ядрами CPU, тем самым ускоряя выполнение.
Важно учесть, что межпроцессное взаимодействие зачастую требует дополнительных ресурсов, и его использование не всегда бывает эффективным – применяйте осознанно.
